<div class="container">
  <p class="text-center mb-3">
    <img src="/assets/images/logo-blue.png" width="250">
  </p>

  <p class="sub-title">Informe seu e-mail de acesso para solicitar a recuperação de senha</p>

  <nb-alert *ngIf="showMessages.error && errors?.length && !submitted" outline="danger" role="alert">
    <p class="alert-title"><b>Ops!</b></p>
    <ul class="alert-message-list">
      <li *ngFor="let error of errors" class="alert-message">{{ error }}</li>
    </ul>
  </nb-alert>

  <nb-alert *ngIf="showMessages.success && messages?.length && !submitted" outline="success" role="alert">
    <p class="alert-title"><b>Oba!</b></p>
    <ul class="alert-message-list">
      <li *ngFor="let message of messages" class="alert-message">{{ message }}</li>
    </ul>
  </nb-alert>

  <form (ngSubmit)="requestPass()" #requestPassForm="ngForm" aria-labelledby="title">

    <div class="form-control-group">
      <label class="label" for="input-email">Informe seu e-mail:</label>
      <input nbInput fullWidth [(ngModel)]="user.email" #email="ngModel" name="email" id="input-email"
        placeholder="Seu e-mail" autofocus
        [status]="email.dirty ? (email.invalid  ? 'danger' : 'success') : 'basic'" [required]="true" minlength="4"
        pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$" maxlength="50" [attr.aria-invalid]="email.invalid && email.touched ? true : null">
      <ng-container *ngIf="email.invalid && email.touched">
        <p class="caption status-danger">
          Campo e-mail obrigatório!
        </p>
        <p class="caption status-danger">
          Informe um e-mail de 4 até 50 caracteres.
        </p>
      </ng-container>
    </div>

    <button nbButton fullWidth status="primary" size="large" [disabled]="submitted || !requestPassForm.valid"
      [class.btn-pulse]="submitted">
      Solicitar senha
    </button>
  </form>

  <section class="sign-in-or-up" aria-label="Sign in or sign up">
    <p><a class="text-link" routerLink="../login">Voltar para login</a></p>
  </section>

</div>